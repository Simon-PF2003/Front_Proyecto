<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card text-center">
        <div class="card-body">
          <div *ngIf="loading" class="text-center">
            <div class="spinner-border text-warning" role="status">
              <span class="sr-only">Cargando...</span>
            </div>
            <p class="mt-3">Verificando estado del pago...</p>
          </div>

          <div *ngIf="!loading">
            <div class="pending-content">
              <i class="fas fa-clock text-warning" style="font-size: 4rem;"></i>
              <h2 class="text-warning mt-3">Pago Pendiente</h2>
              <p class="lead">Tu pago está siendo procesado</p>
              
              <div class="payment-details mt-4">
                <div class="row" *ngIf="orderId">
                  <div class="col-sm-6">
                    <strong>Orden:</strong>
                  </div>
                  <div class="col-sm-6">
                    {{ orderDetails.code }}
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-sm-6">
                    <strong>Estado:</strong>
                  </div>
                  <div class="col-sm-6">
                    <span class="badge badge-warning">{{ paymentStatus }}</span>
                  </div>
                </div>
                <div class="row mt-2" *ngIf="orderDetails?.payment_id">
                  <div class="col-sm-6">
                    <strong>ID de Pago:</strong>
                  </div>
                  <div class="col-sm-6">
                    {{ orderDetails.payment_id }}
                  </div>
                </div>
              </div>

              <div class="info-message mt-4">
                <div class="alert alert-info" role="alert">
                  <h6><i class="fas fa-info-circle"></i> Información importante</h6>
                  <div class="text-left mt-2">
                    <p *ngIf="paymentStatus === 'Procesando'">
                      Tu pago está siendo verificado. Este proceso puede tomar algunos minutos.
                      Te notificaremos cuando se complete.
                    </p>
                    <p *ngIf="paymentStatus === 'Tiempo de espera agotado'">
                      La verificación automática ha finalizado. Puedes verificar manualmente 
                      o contactar con soporte si necesitas ayuda.
                    </p>
                    <ul>
                      <li>Verificamos automáticamente cada 6 segundos</li>
                      <li>Puedes cerrar esta página y volver más tarde</li>
                      <li>Te enviaremos un email con la confirmación</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="progress-info mt-3" *ngIf="checkCount > 0 && checkCount < maxChecks">
                <small class="text-muted">
                  Verificación {{ checkCount }} de {{ maxChecks }}
                </small>
                <div class="progress mt-2">
                  <div class="progress-bar bg-warning" 
                       role="progressbar" 
                       [style.width.%]="(checkCount / maxChecks) * 100">
                  </div>
                </div>
              </div>

              <div class="action-buttons mt-4">
                <button class="btn btn-warning mr-3" 
                        (click)="verificarManualmente()"
                        [disabled]="loading">
                  <i class="fas fa-sync" [class.fa-spin]="loading"></i> 
                  Verificar Ahora
                </button>
                <button class="btn btn-primary mr-3" (click)="verMisPedidos()">
                  <i class="fas fa-list"></i> Ver mis pedidos
                </button>
                <button class="btn btn-outline-secondary" (click)="volverAlInicio()">
                  <i class="fas fa-home"></i> Volver al inicio
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>